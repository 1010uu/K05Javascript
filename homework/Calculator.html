<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>

    <style>
    
        table{
            background-color: #dddddd;
            border: 1px solid darkgray; border-radius: 10px;
            border-spacing: 2px;
        }
        button{
            border:1px solid #dddddd; color:#ffffff;
		    border-radius:10px; font-size: 1.5em;
            height: 49px;  
        }
        .btn1{
            width: 206px;
            background-color:#7b7b7b; 
        }
        .btnNum{
            width: 100px;
            background-color: #373737;
        }
        .btnArithmetic{
            width: 100px;
            background-color:#fa960a;
        }
        #lcd{
            background-color: #70c738; color:#373737;
            text-align: right; border-radius: 10px;
            height: 62px; padding: 7px;
            font-size: 2.5em; font-weight: bold;
        }
    </style>
   
    <script>
        /*
        만약 lcd창을 전역변수로 사용하고 싶으면 아래와 같이 load이벤트를
        이용하여 문서가 끝난 후 dom을 얻어와야한다.
        var lcd;
        window.onload = funtion(){
            var lcd = document.getElementById("lcd");
        }
        */
  
    //숫자입력
    function getdate(data){
        //lcd객체를 얻어온다.
        var lcd = document.getElementById("lcd");
        //만약 클리어 버튼이 눌러진다면 숫자를 0으로 만들어준다.
        if(data=='C'){
            lcd.innerHTML = '0';
            return; //즉시 함수를 종료.
            // clear();
            // return; //만약 실행할 문장이 남아있다면 return을 걸어야 한다.
        }

        //초기상태에서는 0을 지워줘야한다.
        if(lcd.innerHTML=='0'){
            //innerhtml속성은 시작태그와 종료 태그 사이의 컨텐츠를 제어하는 속성이다.
            lcd.innerHTML='';
        }
        if(data =='='){
            //만약 이퀄을 눌렀다면 계산의 결과를 출력해야한다.
            calculate();
        }
        else{
            //초기상태가 아니라면 새로운 숫자를 연결한다.
            lcd.innerHTML += data;
        }
    }
    //계산 결과 창에 띄우기
    var calculate = function(){
        //dom을 얻어온다.
        var lcd = document.getElementById("lcd");
        //eval()함수를 통해 문자열로 전달된 식을 계산.
        var result = eval(lcd.innerHTML);
        lcd.innerHTML = result;
    }
    
    //백스페이스 : 숫자 하나씩 지우기
    function backSpace(){
        //lcd창을 DOM으로 얻어온다.
        var lcd = document.getElementById("lcd");
        //입력된 숫자의 길이를 구한다.
        var strLen = lcd.innerHTML.length;
        // console.log("길이", strLen);
        // lcd.innerHTML = lcd.innerHTML.substr(0, 3);
        /*
        가장 오른쪽에 있는 숫자 하나를 잘라낸다.
        substr(시작인덱스, 길이) => 문자열의 길이 앞까지를 잘라낸다.
        */
        lcd.innerHTML = lcd.innerHTML.substr(0, (strLen-1));
        //lcd창의 모든 숫자가 지워지면 0으로 채워준다. 
        if(lcd.innerHTML==''){
            lcd.innerHTML='0';
        }
    }
    function clear(){
        var lcd = document.getElementById("lcd");
        lcd.innerHTML = "0";
    }

    //
    </script>
</head>
<body>
    <h2 style="text-align: center;">계산기</h2>
    <table align="center">

        <!-- 출력창 -->
        <tr>
            <td colspan="4">
                <!-- 숫자가 길어져서 lcd창을 넘어가는 경우 레이아웃 유지를 위해
                overflow속성을 부여한다. 단, width속성을 지정해야 한다.-->
                <div id="lcd" style="width: 410px; overflow: hidden;">0</div>
            </td>
        </tr>

        <!-- 뒤로가기&C 버튼 btn1 -->
        <tr>
            <td colspan="2" >
                <button class="btn1" onclick="backSpace();">BackSpace</button></td>
            <td colspan="2" >
                <button class="btn1" onclick="getdate('C');">C</button></td>   
        </tr>
        <!-- 숫자버튼 btnNum -->
        <tr>
            <td ><button class="btnNum" onclick="getdate('1');">1</button></td>
            <td ><button class="btnNum" onclick="getdate('2');">2</button></td>
            <td ><button class="btnNum" onclick="getdate('3');">3</button></td>
            <td ><button class="btnArithmetic" 
                onclick="getdate('/');">/</button></td>
        </tr>
        <tr>
            <td ><button class="btnNum" onclick="getdate('4');">4</button></td>
            <td ><button class="btnNum" onclick="getdate('5');">5</button></td>
            <td ><button class="btnNum" onclick="getdate('6');">6</button></td>
            <td ><button  class="btnArithmetic" 
                    onclick="getdate('*');">*</button></td>
        </tr>
        <tr>
            <td ><button class="btnNum" onclick="getdate('7');">7</button></td>
            <td ><button class="btnNum" onclick="getdate('8');">8</button></td>
            <td ><button class="btnNum" onclick="getdate('9');">9</button></td>
            <td ><button  class="btnArithmetic"
                onclick="getdate('+');">+</button></td>
        </tr>
        <tr>
            <td ><button class="btnNum" onclick="getdate('=');">=</button></td>
            <td ><button class="btnNum" onclick="getdate('0');">0</button></td>
            <td ><button class="btnNum" onclick="getdate('.');">.</button></td>
            <td ><button class="btnArithmetic"
                onclick="getdate('-');">-</button></td>
        </tr>
    </table>
    
</body>
</html>